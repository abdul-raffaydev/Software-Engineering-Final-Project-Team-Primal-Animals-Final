@model List<Software_Engineering_Final_Project_Team_Primal_Animals.ViewModels.ClinicianDashboardVM>

    @{
    ViewData["Title"] = "Clinician Dashboard";
    }

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />

    <div class="container mt-4 p-4 shadow bg-white rounded-4">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Clinician Dashboard</h2>

            <!-- AUTO REFRESH SWITCH -->
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="autoRefreshSwitch">
                <label class="form-check-label" for="autoRefreshSwitch">Auto Refresh</label>
            </div>
        </div>

        <form method="get">
            <div class="input-group mb-3">
                <input name="search" type="text" class="form-control" placeholder="Search by patient name or ID">
                <button class="btn btn-outline-primary" type="submit">
                    <i class="bi bi-search"></i>
                </button>
            </div>
        </form>

        <table class="table table-hover">
            <thead class="table-light">
                <tr>
                    <th>Patient Name</th>
                    <th>Status</th>
                    <th>Last Activity</th>
                    <th>Cues</th>
                    <th>View Details</th>
                </tr>
            </thead>

            <tbody>
                @if (Model != null && Model.Any())
            {
                foreach (var item in Model)
                {
                <tr>
                    <td>@item.PatientName</td>

                    <td>
                        @if (item.Status == "High Pressure Alert")
                            {
                        <span class="text-danger fw-bold">
                            <i class="bi bi-exclamation-circle-fill"></i> @item.Status
                        </span>
                            }
                            else if (item.Status == "New Comment")
                            {
                        <span class="text-warning fw-bold">
                            <i class="bi bi-chat-left-text-fill"></i> @item.Status
                        </span>
                            }
                            else
                            {
                        <span class="text-success fw-bold">
                            <i class="bi bi-check-circle-fill"></i> OK
                        </span>
                            }
                    </td>

                    <td>@item.LastActivity</td>
                    <td>@item.Cue</td>

                    <td>
                        <a href="/Clinician/PatientDetails/@item.PatientId"
                           class="btn btn-primary btn-sm">
                            View Details
                        </a>
                    </td>
                </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="5" class="text-center text-muted">
                        No patients found.
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </div>

    <!-- AUTO REFRESH SCRIPT -->
    <script>
    let intervalId = null;

    document.getElementById("autoRefreshSwitch").addEventListener("change", function () {
        if (this.checked) {
            intervalId = setInterval(() => {
                location.reload();
            }, 5000); // refresh every 5 seconds
        } else {
            clearInterval(intervalId);
        }
    });
    </script>
