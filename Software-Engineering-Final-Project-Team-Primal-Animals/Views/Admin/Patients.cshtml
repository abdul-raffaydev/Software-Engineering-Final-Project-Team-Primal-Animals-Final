@model IEnumerable<Software_Engineering_Final_Project_Team_Primal_Animals.ViewModels.CSVPatientViewModel>

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold text-success">Patients</h2>
        <a class="btn btn-secondary" asp-action="AdminDashboard">Back</a>
    </div>

    <div class="card p-4 shadow-sm">

        <table class="table table-hover">
            <thead class="table-light">
                <tr>
                    <th>Patient Name</th>
                    <th>Patient ID</th>
                    <th>Total Readings</th>
                    <th>Latest Reading</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var p in Model)
                {
                    string formatted = "N/A";

                    if (p.LatestDate?.Length == 8)
                    {
                        formatted =
                        $"{p.LatestDate.Substring(6, 2)}-" +
                        $"{p.LatestDate.Substring(4, 2)}-" +
                        $"{p.LatestDate.Substring(0, 4)}";
                    }

                    <tr>
                        <td class="fw-bold">@p.PatientName</td>
                        <td>@p.PatientId</td>
                        <td>@p.ReadingCount</td>
                        <td>@formatted</td>
                    </tr>
                }
            </tbody>
        </table>

    </div>

</div>
