@model IEnumerable<Software_Engineering_Final_Project_Team_Primal_Animals.Models.UserAccount>

@{
    ViewData["Title"] = "User Management";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">User Management</h2>
        <a class="btn btn-secondary" asp-controller="Admin" asp-action="AdminDashboard">Back</a>
    </div>

    <!-- CREATE ACCOUNT -->
    <div class="card shadow p-4 mb-5">
        <h4 class="mb-3">Create Account</h4>

        <form asp-action="CreateAccount" asp-controller="Admin" method="post" class="row g-3">

            <div class="col-md-4">
                <label class="form-label">Username</label>
                <input name="Username" class="form-control" required />
            </div>

            <div class="col-md-4">
                <label class="form-label">Email</label>
                <input type="email" name="Email" class="form-control" required />
            </div>

            <div class="col-md-4">
                <label class="form-label">Password</label>
                <input type="password" id="PasswordInput" name="Password" class="form-control" required />

            </div>

            <div class="form-check mt-2">
                <input class="form-check-input" type="checkbox" id="showPasswordToggle" onclick="togglePassword()">
                <label class="form-check-label" for="showPasswordToggle">
                    Show Password
                </label>
            </div>

            <script>
                function togglePassword() {
                    var passwordInput = document.getElementById("PasswordInput");
                    if (passwordInput.type === "password") {
                        passwordInput.type = "text";
                    } else {
                        passwordInput.type = "password";
                    }
                }
            </script>


            <div class="col-md-12 mt-3">
                <label class="form-label d-block">Role</label>

                <label class="me-3">
                    <input type="radio" name="Role" value="Admin" required /> Admin
                </label>

                <label class="me-3">
                    <input type="radio" name="Role" value="Clinical" /> Clinical
                </label>

                <label>
                    <input type="radio" name="Role" value="Patient" /> Patient
                </label>
            </div>

            <div class="col-md-12 mt-4">
                <button class="btn btn-primary">Create Account</button>
            </div>

        </form>
    </div>

    <!-- MANAGE USERS -->
    <div class="card shadow p-4">
        <h4 class="mb-3">Manage Existing Accounts</h4>

        <table class="table table-striped mt-3">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th style="width: 220px;">Action</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var account in Model)
                {
                    <tr>
                        <td>@account.Username</td>
                        <td>@account.Email</td>
                        <td>@account.Role</td>

                        <td>
                            <a asp-controller="Admin"
                               asp-action="ResetPassword"
                               asp-route-id="@account.Id"
                               class="btn btn-warning btn-sm">
                                Reset Password
                            </a>

                            <a asp-controller="Admin"
                               asp-action="DeleteAccount"
                               asp-route-id="@account.Id"
                               class="btn btn-danger btn-sm ms-2">
                                Delete
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

</div>
